---
import '../../styles/Productos.css';

const apiUrl = "https://go-compipro-api-production.up.railway.app/api/data";
let categorias = [];

try {
  const response = await fetch(apiUrl);
  categorias = await response.json();
} catch (error) {
  console.error("Error fetching categories:", error);
}
---

<section class="products-section">
  <h1>Nuestros Productos</h1>
  <div class="products-grid">
    {categorias.map((categoria) => (
      <div class="product-card">
        <div class="product-image">
          <img src={categoria.portada} alt={categoria.nombre} class="placeholder-img" />
        </div>
        <h3>{categoria.nombre}</h3>
        <p>{categoria.descripcion}</p>
        <button class="request-btn" onclick={`window.location.href='/${categoria.id}'`}>Solicitar</button>
      </div>
    ))}
  </div>
</section>